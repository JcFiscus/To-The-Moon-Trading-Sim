<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>To‑The‑Moon Trading Sim — Modular v6 + Summary + Auto‑Risk</title>
  <link rel="stylesheet" href="src/css/main.css" />
</head>
<body>
<div id="app">
  <header id="hud" class="hud panel">
    <div class="brand">🛰️ To‑The‑Moon <small id="version"></small></div>
    <div class="stats">
      <div class="pill"><span class="label">Day</span> <b id="dayNum">0</b> • <span class="kbd" id="dayTimer">—s</span></div>
      <div class="pill"><span class="label">Cash</span> <b id="cash">$0.00</b></div>
      <div class="pill"><span class="label">Debt</span> <b id="debt">$0.00</b></div>
      <div class="pill"><span class="label">Assets</span> <b id="assets">$0.00</b></div>
      <div class="pill"><span class="label">Net</span> <b id="net">$0.00</b></div>
      <div class="pill"><span class="label">Risk</span> <b id="riskPct">0%</b></div>
    </div>
  </header>

  <main id="layout" class="layout">
    <aside id="market" class="market panel" aria-label="Market">
      <div class="market-header row">
        <div class="mini">10‑second days • After‑hours news drives tomorrow</div>
        <div class="row">
          <button id="startBtn" class="accent" aria-label="Start day">▶ Start Day</button>
          <button id="saveBtn" aria-label="Save game">Save</button>
          <button id="helpBtn" aria-label="Help">Help</button>
          <button id="contrastBtn" aria-label="Toggle high contrast mode" aria-pressed="false">Contrast</button>
          <button id="debugBtn" aria-label="Toggle debug info" aria-pressed="false">Debug</button>
          <button id="resetBtn" class="bad" aria-label="Hard reset game">Hard Reset</button>
        </div>
      </div>
      <table id="marketTable" aria-label="Market data table"></table>
    </aside>

    <section id="details" class="details panel" aria-label="Details">
      <nav class="tabs" role="tablist">
        <button role="tab" aria-selected="true" data-tab="chart">Chart</button>
        <button role="tab" aria-selected="false" data-tab="risk">Risk</button>
        <button role="tab" aria-selected="false" data-tab="news">News</button>
        <span class="spacer"></span>
        <button class="primary trade" id="open-trade">Trade</button>
      </nav>
      <div id="panel-chart" role="tabpanel">
        <div class="row" style="justify-content:space-between;">
          <div class="row" style="align-items:center;">
            <span>Chart: <b id="chartTitle"></b></span>
            <button id="chartToggle" aria-label="Toggle chart type">Candles</button>
            <div id="chartIntervals" class="row">
              <button class="chip-btn" data-interval="hour" aria-pressed="true">1H</button>
              <button class="chip-btn" data-interval="day" aria-pressed="false">1D</button>
              <button class="chip-btn" data-interval="week" aria-pressed="false">1W</button>
              <button class="chip-btn" data-interval="month" aria-pressed="false">1M</button>
            </div>
            <input type="range" id="chartZoomRange" min="1" max="100" value="1" aria-label="Chart zoom" />
          </div>
          <div class="row">
            <span class="tag">Prev close = dashed</span>
            <span class="tag">Boundaries = day ends</span>
          </div>
        </div>
        <div class="chart-wrap"><canvas id="chart" width="820" height="300" role="img" aria-label="Asset price chart"></canvas><div id="chartTooltip" class="chart-tooltip" role="tooltip"></div></div>
        <div class="statgrid" id="chartStats"></div>
      </div>
      <div id="panel-risk" role="tabpanel" hidden></div>
      <div id="panel-news" role="tabpanel" hidden>
        <div class="row" style="justify-content:space-between;">
          <div>News & Events — <b id="newsSymbol"></b></div>
          <div class="row" style="align-items:center;">
            <div class="mini">Follow the selected asset</div>
            <button id="majorOnly" class="chip-btn" aria-pressed="false" aria-label="Show major news only">Major</button>
            <button id="newsCollapse" class="chip-btn" aria-label="Collapse news panel" aria-expanded="true">Collapse</button>
          </div>
        </div>
        <div id="newsPanel">
          <div id="newsScroll"><div id="newsTable"></div></div>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Toasts -->
<div class="toast-stack" id="toastStack"></div>

<!-- Overlays render here so nothing can cover them -->
<div id="overlay-root" aria-live="polite"></div>

<script type="module" src="src/js/app.js"></script>
</body>
</html>
